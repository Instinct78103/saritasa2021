(function(t){function e(e){for(var n,o,a=e[0],u=e[1],c=e[2],p=0,d=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,a=1;a<s.length;a++){var u=s[a];0!==r[u]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=u;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("PostsFilter"),s("Posts"),s("Pagination")],1)},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"posts-filter"},[s("ul",{staticClass:"main-filter",attrs:{"data-filter-name":"type"}},[t._l(t.types,(function(e){return s("li",{key:e.type_slug},[s("button",{staticClass:"sar-btn-grey",class:"all"===e.type_slug&&""===t.$store.getters.getFilter.type||t.$store.getters.getFilter.type===e.type_slug?"active":"",attrs:{type:"button","data-filter":e.type_slug},on:{click:function(e){return e.preventDefault(),t.chooseType.apply(null,arguments)}}},[t._v(" "+t._s(e.type_name)+" ")])])})),s("li",[s("a",{staticClass:"toggle-list",class:t.subfilterVisible?"active":"",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.subfilterVisible=!t.subfilterVisible}}},[s("svg",{attrs:{id:"svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"19",height:"12.002",viewBox:"0, 0, 400,252.63157894736844"}},[s("g",{attrs:{id:"svgg"}},[s("path",{attrs:{id:"path0",d:"M0.000 26.279 L 0.000 52.558 200.000 52.558 L 400.000 52.558 400.000 26.279 L 400.000 0.000 200.000 0.000 L 0.000 0.000 0.000 26.279 M56.222 95.011 C 54.115 95.227,53.650 95.400,53.262 96.113 C 52.265 97.949,52.323 155.137,53.324 156.644 C 54.229 158.007,44.218 157.920,200.918 157.924 L 346.119 157.928 346.256 157.404 C 346.332 157.116,346.629 156.818,346.917 156.743 L 347.442 156.606 347.442 126.945 C 347.442 107.339,347.356 97.284,347.189 97.284 C 347.050 97.284,346.936 97.069,346.936 96.806 C 346.936 95.662,346.180 95.247,343.650 95.002 C 340.823 94.729,58.902 94.738,56.222 95.011 M139.243 200.400 C 136.874 200.868,136.958 199.833,136.957 228.490 L 136.955 252.685 200.000 252.685 L 263.045 252.685 263.026 227.732 C 263.005 200.697,263.038 201.352,261.635 200.632 C 260.787 200.196,141.420 199.971,139.243 200.400 ",stroke:"none",fill:"#045c7c","fill-rule":"evenodd"}})])]),s("span",[t._v("Filter by Industry")])])])],2),t.subfilterVisible?s("ul",{staticClass:"sub-filter",attrs:{"data-filter-name":"industry"}},t._l(t.industries,(function(e){return s("li",{key:e.slug},[s("button",{staticClass:"sar-btn-link",class:e.slug===t.$store.getters.getFilter.industry?"active":"",attrs:{type:"button","data-filter":e.slug},on:{click:function(e){return e.preventDefault(),t.chooseIndustry.apply(null,arguments)}}},[t._v(" "+t._s(e.name)+" ")])])})),0):t._e()])},a=[],u=(s("4de4"),s("ac1f"),s("1276"),s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("a15b"),s("d81d"),s("b64b"),s("99af"),s("25f0"),s("3835"),s("5530"));s("caad"),s("2532"),s("07ac"),s("7db0"),s("4fad");function c(t,e){var s=Object.keys(e);return t.filter((function(t){return s.every((function(s){var n;return!e[s].length||(null===(n=t[s])||void 0===n?void 0:n.includes(e[s]))}))}))}function l(t){return Object.values(t).reduce((function(e,s){if(s){var n=Object.keys(t).find((function(e){return t[e]===s}));e[n]=s}return Object(u["a"])({},e)}),[])}var p={name:"PostsFilter",data:function(){return{subfilterVisible:!0}},methods:{chooseType:function(t){this.$store.dispatch("chooseType","all"===t.target.dataset.filter?"":t.target.dataset.filter),this.updateHistory()},chooseIndustry:function(t){this.$store.dispatch("chooseIndustry",t.target.dataset.filter),this.updateHistory()},updateHistory:function(){var t=window.location.pathname.split("/")[1],e=new URL(window.location.href),s=l(this.$store.getters.getFilter);e.pathname="/".concat(t,"/")+Object.keys(s).map((function(t){return"".concat(t,"-").concat(s[t])})).join("/"),window.history.pushState(s,"",e.toString())}},computed:{types:function(){return this.$store.getters.getTypes},industries:function(){return this.$store.getters.getIndustries}}},d=p,f=s("2877"),g=Object(f["a"])(d,o,a,!1,null,null,null),y=g.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.$store.getters.get_postsNumberByQuery>0?s("div",{staticClass:"posts-container"},t._l(t.getPosts,(function(e){return s("div",{key:e.name,staticClass:"col span_3 element",class:[e.type,e.industry]},[s("div",{staticClass:"work-item"},[s("div",{staticClass:"bg",style:"background-image: url("+e.image+")"}),s("div",{staticClass:"work-info"},[s("p",{staticClass:"work-short-description"},[t._v(t._s(e.title))]),s("hr"),s("span",{staticClass:"work-category"})]),s("a",{attrs:{href:e.href}})])])})),0):0===this.$store.getters.get_postsNumberByQuery?s("div",{staticClass:"empty"},[s("span",[t._v("No projects found")])]):s("div",{staticClass:"loading"})},v=[],b={name:"Posts",computed:{getPosts:function(){return Object.values(this.$store.getters.getFilter).every((function(t){return""===t}))?this.$store.getters.getPosts:c(this.$store.getters.getPosts,l(this.$store.getters.getFilter))}}},m=b,_=Object(f["a"])(m,h,v,!1,null,null,null),w=_.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.state.paginationVisible?s("div",{staticClass:"pagination"},[s("button",{staticClass:"sar-btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.viewMore.apply(null,arguments)}}},[t._v("View More")])]):t._e()},P=[],O={name:"Pagination",methods:{viewMore:function(){this.$store.dispatch("loadPosts",this.$store.getters.getPosts.map((function(t){return t.id})))}}},k=O,C=Object(f["a"])(k,j,P,!1,null,null,null),x=C.exports,$={name:"App",components:{PostsFilter:y,Posts:w,Pagination:x},created:function(){this.$store.dispatch("loadFilter")}},F=$,T=Object(f["a"])(F,r,i,!1,null,null,null),R=T.exports,S=s("1da1"),M=s("2909"),N=(s("96cf"),s("4e82"),s("c740"),s("b0c0"),s("2f62"));n["a"].use(N["a"]);var V=new N["a"].Store({state:{types:[],industries:[],posts:[],filter:{type:"",industry:""},postsNumber:null,paginationVisible:!0},getters:{getTypes:function(t){return t.types},getIndustries:function(t){return t.industries},getFilter:function(t){return t.filter},getPosts:function(t){return t.posts},getPaginationStatus:function(t){return t.paginationVisible},get_postsNumberByQuery:function(t){return t.postsNumber}},mutations:{set_types:function(t,e){t.types=e},set_industries:function(t,e){t.industries=e},set_posts:function(t,e){var s;(s=t.posts).push.apply(s,Object(M["a"])(e))},set_type:function(t,e){t.filter.type=e},set_industry:function(t,e){t.filter.industry=e},set_paginationStatus:function(t,e){t.paginationVisible=e},set_postsNumber:function(t,e){t.postsNumber=e}},actions:{loadFilter:function(t){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function s(){var n,r,i,o,a,l,p,d,f,g;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=t.commit,s.prev=1,s.next=4,fetch("/wp-json/sar/v2/projects/types_industries");case 4:return r=s.sent,s.next=7,r.json();case 7:i=s.sent,o=Object.values(i).filter((function(t){return t.industries.length})).reduce((function(t,e){return t.concat(e.industries)}),[]).filter((function(t,e,s){return s.findIndex((function(e){return e.name===t.name&&e.slug===t.slug}))===e})).sort((function(t,e){return t.slug.localeCompare(e.slug)})),n("set_types",[{type_name:"All Categories",type_slug:"",industries:o}].concat(Object(M["a"])(i))),a=window.location.pathname.split("/").filter((function(t){return t})),l=a.reduce((function(t,e){return e.includes("type-")?(t["type"]="",t["type"]=e.split("type-")[1]):e.includes("industry-")&&(t["industry"]="",t["industry"]=e.split("industry-")[1]),Object(u["a"])({},t)}),[]),l.hasOwnProperty("type")&&l.hasOwnProperty("industry")?(n("set_type",l.type),d=null===(p=c(e.getters.getTypes,{type_slug:l.type})[0])||void 0===p?void 0:p.industries,n("set_industries",d),n("set_industry",l.industry)):l.hasOwnProperty("type")?(n("set_type",l.type),g=null===(f=c(e.getters.getTypes,{type_slug:l.type})[0])||void 0===f?void 0:f.industries,n("set_industries",g)):l.hasOwnProperty("industry")?(n("set_industries",o),n("set_industry",l.industry)):n("set_industries",o),e.dispatch("loadPosts"),s.next=19;break;case 16:s.prev=16,s.t0=s["catch"](1),console.log(s.t0);case 19:case"end":return s.stop()}}),s,null,[[1,16]])})))()},loadPosts:function(t){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function s(){var n,r,i,o,a,u,p,d,f,g;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=t.commit,s.prev=1,r="/wp-json/sar/v2/projects/posts?",i=0===Object.keys(l(e.getters.getFilter)).length,o=i?8-e.getters.getPosts.length%8:8-c(e.getters.getPosts,l(e.getters.getFilter)).length%8,a={"project-type":e.getters.getFilter.type,"project-industry":e.getters.getFilter.industry,exclude:e.getters.getPosts.map((function(t){return t.id})),posts_per_page:o},u=Object.keys(a).map((function(t){return"".concat(t,"=").concat(a[t])})).join("&"),s.next=9,Promise.all([fetch(r+u)]);case 9:return p=s.sent,d=p.map((function(t){return t.json()})),s.next=13,Promise.all(d);case 13:f=s.sent,n("set_postsNumber",f[0].count),n("set_posts",f[0].posts?f[0].posts:[]),g=c(e.getters.getPosts,l(e.getters.getFilter)).length,e.dispatch("displayPagination",!(g===e.getters.get_postsNumberByQuery)),s.next=23;break;case 20:s.prev=20,s.t0=s["catch"](1),console.log(s.t0);case 23:case"end":return s.stop()}}),s,null,[[1,20]])})))()},displayPagination:function(t,e){return Object(S["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=t.commit,n("set_paginationStatus",e);case 2:case"end":return s.stop()}}),s)})))()},chooseType:function(t,e){var s=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var r,i,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit,i=t.state,!e&&i.filter.industry?(r("set_industry",""),s.dispatch("loadPosts")):e!==i.filter.type&&(r("set_type",e),r("set_industry",""),a=null===(o=c(s.getters.getTypes,{type_slug:s.getters.getFilter.type})[0])||void 0===o?void 0:o.industries,r("set_industries",a),s.dispatch("loadPosts"));case 2:case"end":return n.stop()}}),n)})))()},chooseIndustry:function(t,e){var s=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit,i=t.state,r("set_industry",e===i.filter.industry?"":e),s.dispatch("loadPosts");case 3:case"end":return n.stop()}}),n)})))()}}});n["a"].config.productionTip=!1,new n["a"]({store:V,render:function(t){return t(R)}}).$mount("#app")}});
//# sourceMappingURL=app.js.map